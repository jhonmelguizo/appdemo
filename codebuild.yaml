steps:
  # Clonar el repositorio de código desde GitHub
  - name: 'gcr.io/cloud-builders/git'
    args: ['clone', 'https://github.com/jhonmelguizo/appdemo', 'mi-proyecto']
        
  # Construir la imagen de Docker usando la etiqueta dinámica
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.io/pr1-jamc-gcp/app-demo/appdemo:latest', '.']
    dir: 'mi-proyecto'
    
  # Push de la imagen a Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'gcr.io/pr1-jamc-gcp/app-demo/appdemo:latest']

images:
  # Registrar la imagen en Container Registry
  - 'gcr.io/pr1-jamc-gcp/app-demo/appdemo:latest'
